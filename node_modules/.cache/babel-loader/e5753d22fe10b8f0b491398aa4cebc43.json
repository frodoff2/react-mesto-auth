{"ast":null,"code":"var _jsxFileName = \"/Users/assetmurzabayev/Desktop/mesto-react/src/components/App.js\";\nimport React from 'react';\nimport { BrowserRouter, NavLink, Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport ImagePopup from './ImagePopup.js';\nimport api from '../utils/API.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport DeletePopup from './DeletePopup.js';\nimport InfoToolTips from './InfoToolTip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Elements from './Elements.js';\nimport * as Auth from '../Auth.js';\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [userData, setUserData] = React.useState('');\n  const history = useHistory();\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function tokenCheck() {\n    if (localStorage.getItem('jwt')) {\n      let jwt = localStorage.getItem('jwt');\n      Auth.getContent(jwt).then(res => {\n        if (res.data) {\n          history.push('/');\n          setLoggedIn(true);\n          setUserData(res.data.email);\n        }\n      }).catch(err => {\n        console.log(`Упс, произошла ошибка: ${err}`);\n      });\n    }\n  }\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, [loggedIn]);\n\n  function signOut() {\n    localStorage.removeItem('jwt');\n    history.push('/signin');\n    setLoggedIn(false);\n    setUserData('');\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    signOut: signOut,\n    userData: userData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ProtectedRoute, {\n    exact: true,\n    path: \"/\",\n    loggedIn: loggedIn,\n    component: Elements,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Register, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 36\n    }\n  }), \" \", /*#__PURE__*/React.createElement(InfoToolTips, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 49\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Login, {\n    handleLogin: handleLogin,\n    tokenCheck: tokenCheck,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 36\n    }\n  }), \"  \"), /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, \" \", loggedIn ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 42\n    }\n  }) : /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 64\n    }\n  }), \" \")), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"elements\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/assetmurzabayev/Desktop/mesto-react/src/components/App.js"],"names":["React","BrowserRouter","NavLink","Route","Switch","Redirect","useHistory","Header","Main","Footer","ImagePopup","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","Login","Register","DeletePopup","InfoToolTips","ProtectedRoute","Elements","Auth","App","loggedIn","setLoggedIn","useState","userData","setUserData","history","handleLogin","tokenCheck","localStorage","getItem","jwt","getContent","then","res","data","push","email","catch","err","console","log","useEffect","signOut","removeItem"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { BrowserRouter, NavLink, Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport ImagePopup from './ImagePopup.js';\nimport api from '../utils/API.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport DeletePopup from './DeletePopup.js';\nimport InfoToolTips from './InfoToolTip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Elements from './Elements.js';\nimport * as Auth from '../Auth.js';\n\nfunction App() {\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [userData, setUserData] = React.useState('');\n  const history = useHistory();\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function tokenCheck() {\n    if (localStorage.getItem('jwt')) {\n      let jwt = localStorage.getItem('jwt');\n      Auth.getContent(jwt)\n        .then((res) => {\n          if (res.data) {\n            history.push('/');\n            setLoggedIn(true); \n            setUserData(res.data.email); \n          }\n        })\n        .catch((err) => {\n          console.log(`Упс, произошла ошибка: ${err}`);\n        })\n    }\n  }\n\n   React.useEffect(() => {\n    tokenCheck();\n  }, [loggedIn]) \n\n\n  function signOut() {\n    localStorage.removeItem('jwt');\n    history.push('/signin')\n    setLoggedIn(false);\n     setUserData('');\n  }\n\n  return (\n\n      <div className=\"App\">\n        <div className=\"page\">  \n\n          <Header signOut={signOut} userData={userData}/>\n  \n          <Switch>\n\n          <ProtectedRoute exact path=\"/\" loggedIn={loggedIn} component={Elements} \n        \n          />\n\n            <Route path=\"/signup\"> <Register /> <InfoToolTips /> </Route>\n\n            <Route path=\"/signin\"> <Login handleLogin={handleLogin} tokenCheck={tokenCheck}/>  </Route>\n\n            <Route path=\"/\"> {loggedIn ? <Redirect to=\"/\" /> : <Redirect to='/signin' />} </Route>\n\n            </Switch>\n          \n            \n\n        <section className=\"elements\">  \n        \n        </section>  \n        \n\n      </div>  \n    </div>\n\n  );\n\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}