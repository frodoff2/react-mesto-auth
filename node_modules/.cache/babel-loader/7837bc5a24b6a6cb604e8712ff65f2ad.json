{"ast":null,"code":"var _jsxFileName = \"/Users/assetmurzabayev/Desktop/mesto-react/src/components/App.js\";\nimport React from 'react';\nimport { BrowserRouter, NavLink, Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport Header from './Header.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport InfoToolTips from './InfoToolTip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Elements from './Elements.js';\nimport * as Auth from '../Auth.js';\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const history = useHistory();\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function tokenCheck() {\n    let storage = localStorage.getItem('jwt');\n\n    if (storage) {\n      Auth.getContent(storage).then(data => {\n        if (data) {\n          history.push('/');\n          setLoggedIn(true);\n          setEmail({\n            email: data.email\n          });\n        }\n      }).catch(err => {\n        console.log(`Ошибка ${err}`);\n      });\n    }\n  }\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, [loggedIn]);\n\n  function signOut() {\n    localStorage.removeItem('jwt');\n    history.push('/signin');\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ProtectedRoute, {\n    exact: true,\n    path: \"/\",\n    loggedIn: loggedIn,\n    component: Elements,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Register, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 36\n    }\n  }), \" \", /*#__PURE__*/React.createElement(InfoToolTips, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 49\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Login, {\n    handleLogin: handleLogin,\n    tokenCheck: tokenCheck,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 36\n    }\n  }), \"  \"), /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, \" \", loggedIn ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 42\n    }\n  }) : /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 64\n    }\n  }), \" \")), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"elements\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/assetmurzabayev/Desktop/mesto-react/src/components/App.js"],"names":["React","BrowserRouter","NavLink","Route","Switch","Redirect","useHistory","Header","Login","Register","InfoToolTips","ProtectedRoute","Elements","Auth","App","loggedIn","setLoggedIn","useState","email","setEmail","history","handleLogin","tokenCheck","storage","localStorage","getItem","getContent","then","data","push","catch","err","console","log","useEffect","signOut","removeItem"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { BrowserRouter, NavLink, Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport Header from './Header.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport InfoToolTips from './InfoToolTip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Elements from './Elements.js';\nimport * as Auth from '../Auth.js';\n\nfunction App() {\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const history = useHistory();\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function tokenCheck() {\n    let storage = localStorage.getItem('jwt');\n    if (storage) {\n      Auth.getContent(storage)\n        .then((data) => {\n          if (data) {\n            history.push('/');\n            setLoggedIn(true); \n            setEmail({ \n             email: data.email\n            }); \n          }\n        })\n        .catch((err) => {\n          console.log(`Ошибка ${err}`);\n        })\n    }\n  }\n\n   React.useEffect(() => {\n    tokenCheck();\n  }, [loggedIn]) \n\n  function signOut() {\n    localStorage.removeItem('jwt');\n    history.push('/signin')\n  }\n\n  return (\n\n      <div className=\"App\">\n        <div className=\"page\">  \n\n          <Header />\n  \n          <Switch>\n\n          <ProtectedRoute exact path=\"/\" loggedIn={loggedIn} component={Elements} \n        \n          />\n            <Route path=\"/signup\"> <Register /> <InfoToolTips /> </Route>\n\n            <Route path=\"/signin\"> <Login handleLogin={handleLogin} tokenCheck={tokenCheck}/>  </Route>\n\n            <Route path=\"/\"> {loggedIn ? <Redirect to=\"/\" /> : <Redirect to='/signin' />} </Route>\n\n            </Switch>\n          \n        <section className=\"elements\">  \n        \n        </section>  \n        \n\n      </div>  \n    </div>\n\n  );\n\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}