{"ast":null,"code":"var _jsxFileName = \"/Users/assetmurzabayev/Desktop/mesto-react/src/components/App.js\";\nimport React from 'react';\nimport { BrowserRouter, Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport Header from './Header.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport InfoToolTips from './InfoToolTip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Elements from './Elements.js';\nimport * as Auth from '../Auth.js';\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [userData, setUserData] = React.useState('');\n  const [openTool, setOpenTool] = React.useState(false);\n  const history = useHistory();\n\n  function openPopup() {\n    setOpenTool(true);\n  }\n\n  function handleLogin() {\n    setLoggedIn(true);\n    console.log('fgdfg');\n  }\n\n  function tokenCheck() {\n    if (localStorage.getItem('jwt')) {\n      let jwt = localStorage.getItem('jwt');\n      Auth.getContent(jwt).then(res => {\n        if (res.data) {\n          setLoggedIn(true);\n          setUserData(res.data.email);\n          history.push('/');\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n\n  React.useEffect(() => {\n    tokenCheck(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loggedIn]);\n\n  function signOut() {\n    localStorage.removeItem('jwt');\n    history.push('/signin');\n    setLoggedIn(false);\n    setUserData('');\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    signOut: signOut,\n    userData: userData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ProtectedRoute, {\n    exact: true,\n    path: \"/\",\n    loggedIn: loggedIn,\n    component: Elements,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Register, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 37\n    }\n  }), \" \", /*#__PURE__*/React.createElement(InfoToolTips, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 50\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Login, {\n    handleLogin: handleLogin,\n    tokenCheck: tokenCheck,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 37\n    }\n  }), \"  \"), /*#__PURE__*/React.createElement(Route, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, \" \", loggedIn ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 33\n    }\n  }) : /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 55\n    }\n  }), \" \")), /*#__PURE__*/React.createElement(InfoToolTips, {\n    isOpen: openTool,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, \" \"), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"elements\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/assetmurzabayev/Desktop/mesto-react/src/components/App.js"],"names":["React","BrowserRouter","Route","Switch","Redirect","useHistory","Header","Login","Register","InfoToolTips","ProtectedRoute","Elements","Auth","App","loggedIn","setLoggedIn","useState","userData","setUserData","openTool","setOpenTool","history","openPopup","handleLogin","console","log","tokenCheck","localStorage","getItem","jwt","getContent","then","res","data","email","push","catch","err","useEffect","signOut","removeItem"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { BrowserRouter, Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport Header from './Header.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport InfoToolTips from './InfoToolTip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Elements from './Elements.js';\nimport * as Auth from '../Auth.js';\n\nfunction App() {\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [userData, setUserData] = React.useState('');\n  const [openTool, setOpenTool] = React.useState(false);\n  const history = useHistory();\n\n  function openPopup() {\n    setOpenTool(true);\n  }\n\n  function handleLogin() {\n    setLoggedIn(true);\n    console.log('fgdfg');\n  }\n\n  function tokenCheck() {\n    if (localStorage.getItem('jwt')) {\n      let jwt = localStorage.getItem('jwt');\n      Auth.getContent(jwt)\n        .then((res) => {\n          if (res.data) {\n            setLoggedIn(true); \n            setUserData(res.data.email); \n            history.push('/');\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n    }\n  }\n\n   React.useEffect(() => {\n    tokenCheck();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loggedIn]) \n\n\n  function signOut() {\n    localStorage.removeItem('jwt');\n    history.push('/signin')\n    setLoggedIn(false);\n     setUserData('');\n  }\n\n  return (\n\n      <div className=\"App\">\n        <div className=\"page\">  \n\n          <Header signOut={signOut} userData={userData}/>\n  \n          <Switch>\n\n          <ProtectedRoute exact path=\"/\" loggedIn={loggedIn} component={Elements} \n        \n          />\n\n            <Route  path=\"/signup\"> <Register /> <InfoToolTips /> </Route>\n\n            <Route  path=\"/signin\"> <Login handleLogin={handleLogin} tokenCheck={tokenCheck}/>  </Route>\n\n            <Route> {loggedIn ? <Redirect to=\"/\" /> : <Redirect to='/signin' />} </Route>\n\n            </Switch>\n          \n          <InfoToolTips isOpen={openTool}> </InfoToolTips>\n            \n\n        <section className=\"elements\">  \n        \n        </section>  \n        \n\n      </div>  \n    </div>\n\n  );\n\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}