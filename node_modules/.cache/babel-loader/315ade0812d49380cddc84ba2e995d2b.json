{"ast":null,"code":"var _jsxFileName = \"/Users/assetmurzabayev/Desktop/mesto-react/src/components/App.js\";\nimport React from 'react';\nimport { BrowserRouter, NavLink, Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport Header from './Header.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport InfoToolTips from './InfoToolTip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Elements from './Elements.js';\nimport * as Auth from '../Auth.js';\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [userData, setUserData] = React.useState('');\n  const history = useHistory();\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function tokenCheck() {\n    if (localStorage.getItem('jwt')) {\n      let jwt = localStorage.getItem('jwt');\n      Auth.getContent(jwt).then(data => {\n        if (data) {\n          history.push('/');\n          setLoggedIn(true);\n          setUserData({\n            email: data.email\n          });\n        }\n      }).catch(err => {\n        console.log(`Упс, произошла ошибка: ${err}`);\n      });\n    }\n  }\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, [loggedIn]);\n\n  function signOut() {\n    localStorage.removeItem('jwt');\n    history.push('/signin');\n    setLoggedIn(false); // setEmail('');\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    signOut: signOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ProtectedRoute, {\n    exact: true,\n    path: \"/cards\",\n    loggedIn: loggedIn,\n    component: Elements,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Register, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 36\n    }\n  }), \" \", /*#__PURE__*/React.createElement(InfoToolTips, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 49\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Login, {\n    handleLogin: handleLogin,\n    tokenCheck: tokenCheck,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 36\n    }\n  }), \"  \"), /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, \" \", loggedIn ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/cards\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 42\n    }\n  }) : /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 69\n    }\n  }), \" \")), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"elements\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/assetmurzabayev/Desktop/mesto-react/src/components/App.js"],"names":["React","BrowserRouter","NavLink","Route","Switch","Redirect","useHistory","Header","Login","Register","InfoToolTips","ProtectedRoute","Elements","Auth","App","loggedIn","setLoggedIn","useState","userData","setUserData","history","handleLogin","tokenCheck","localStorage","getItem","jwt","getContent","then","data","push","email","catch","err","console","log","useEffect","signOut","removeItem"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { BrowserRouter, NavLink, Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport Header from './Header.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport InfoToolTips from './InfoToolTip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Elements from './Elements.js';\nimport * as Auth from '../Auth.js';\n\nfunction App() {\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [userData, setUserData] = React.useState('');\n  const history = useHistory();\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function tokenCheck() {\n    if (localStorage.getItem('jwt')) {\n      let jwt = localStorage.getItem('jwt');\n      Auth.getContent(jwt)\n        .then((data) => {\n          if (data) {\n            history.push('/');\n            setLoggedIn(true); \n            setUserData({\n              email: data.email\n            }); \n          }\n        })\n        .catch((err) => {\n          console.log(`Упс, произошла ошибка: ${err}`);\n        })\n    }\n  }\n\n   React.useEffect(() => {\n    tokenCheck();\n  }, [loggedIn]) \n\n  function signOut() {\n    localStorage.removeItem('jwt');\n    history.push('/signin')\n    setLoggedIn(false);\n    // setEmail('');\n  }\n\n  return (\n\n      <div className=\"App\">\n        <div className=\"page\">  \n\n          <Header signOut={signOut}/>\n  \n          <Switch>\n\n          <ProtectedRoute exact path=\"/cards\" loggedIn={loggedIn} component={Elements} \n        \n          />\n            <Route path=\"/signup\"> <Register /> <InfoToolTips /> </Route>\n\n            <Route path=\"/signin\"> <Login handleLogin={handleLogin} tokenCheck={tokenCheck}/>  </Route>\n\n            <Route path=\"/\"> {loggedIn ? <Redirect to=\"/cards\" /> : <Redirect to='/signin' />} </Route>\n\n            </Switch>\n          \n        <section className=\"elements\">  \n        \n        </section>  \n        \n\n      </div>  \n    </div>\n\n  );\n\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}