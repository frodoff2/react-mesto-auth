{"ast":null,"code":"var _jsxFileName = \"/Users/assetmurzabayev/Desktop/mesto-react/src/components/App.js\";\nimport React from 'react';\nimport { BrowserRouter, Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport Header from './Header.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport InfoToolTips from './InfoToolTip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Elements from './Elements.js';\nimport * as Auth from '../Auth.js';\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [userData, setUserData] = React.useState('');\n  const [isInfoToolOpen, setIsInfoToolOpen] = React.useState(false);\n  const [successRegister, setSuccessRegister] = React.useState(false);\n  const history = useHistory();\n\n  function handleInfoToolPopup() {\n    setIsInfoToolOpen(true);\n  }\n\n  function handleSuccessRegister() {\n    setSuccessRegister(true);\n  }\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function tokenCheck() {\n    if (localStorage.getItem('jwt')) {\n      let jwt = localStorage.getItem('jwt');\n      Auth.getContent(jwt).then(res => {\n        if (res.data) {\n          setLoggedIn(true);\n          setUserData(res.data.email);\n          history.push('/');\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n\n  React.useEffect(() => {\n    tokenCheck(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loggedIn]);\n\n  function signOut() {\n    localStorage.removeItem('jwt');\n    history.push('/signin');\n    setLoggedIn(false);\n    setUserData('');\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    signOut: signOut,\n    userData: userData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ProtectedRoute, {\n    exact: true,\n    path: \"/\",\n    loggedIn: loggedIn,\n    component: Elements,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Register, {\n    handle: handleInfoToolPopup,\n    successRegister: handleSuccessRegister,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 37\n    }\n  }), \"  \"), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Login, {\n    handleLogin: handleLogin,\n    tokenCheck: tokenCheck,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 37\n    }\n  }), \"  \"), /*#__PURE__*/React.createElement(Route, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, \" \", loggedIn ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 33\n    }\n  }) : /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 55\n    }\n  }), \" \")), /*#__PURE__*/React.createElement(InfoToolTips, {\n    isOpen: isInfoToolOpen,\n    success: successRegister,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, \" \"), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"elements\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/assetmurzabayev/Desktop/mesto-react/src/components/App.js"],"names":["React","BrowserRouter","Route","Switch","Redirect","useHistory","Header","Login","Register","InfoToolTips","ProtectedRoute","Elements","Auth","App","loggedIn","setLoggedIn","useState","userData","setUserData","isInfoToolOpen","setIsInfoToolOpen","successRegister","setSuccessRegister","history","handleInfoToolPopup","handleSuccessRegister","handleLogin","tokenCheck","localStorage","getItem","jwt","getContent","then","res","data","email","push","catch","err","console","log","useEffect","signOut","removeItem"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { BrowserRouter, Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport Header from './Header.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport InfoToolTips from './InfoToolTip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Elements from './Elements.js';\nimport * as Auth from '../Auth.js';\n\nfunction App() {\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [userData, setUserData] = React.useState('');\n  const [isInfoToolOpen, setIsInfoToolOpen] = React.useState(false);\n  const [successRegister, setSuccessRegister] = React.useState(false);\n\n  const history = useHistory();\n\n  function handleInfoToolPopup() {\n    setIsInfoToolOpen(true);\n  }\n\n  function handleSuccessRegister() {\n    setSuccessRegister(true);\n  }\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function tokenCheck() {\n    if (localStorage.getItem('jwt')) {\n      let jwt = localStorage.getItem('jwt');\n      Auth.getContent(jwt)\n        .then((res) => {\n          if (res.data) {\n            setLoggedIn(true); \n            setUserData(res.data.email); \n            history.push('/');\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n    }\n  }\n\n   React.useEffect(() => {\n    tokenCheck();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loggedIn]) \n\n\n  function signOut() {\n    localStorage.removeItem('jwt');\n    history.push('/signin')\n    setLoggedIn(false);\n     setUserData('');\n  }\n\n  return (\n\n      <div className=\"App\">\n        <div className=\"page\">  \n\n          <Header signOut={signOut} userData={userData}/>\n  \n          <Switch>\n\n          <ProtectedRoute exact path=\"/\" loggedIn={loggedIn} component={Elements} \n        \n          />\n\n            <Route  path=\"/signup\"> <Register handle={handleInfoToolPopup} successRegister={handleSuccessRegister} />  </Route>\n\n            <Route  path=\"/signin\"> <Login handleLogin={handleLogin} tokenCheck={tokenCheck}/>  </Route>\n\n            <Route> {loggedIn ? <Redirect to=\"/\" /> : <Redirect to='/signin' />} </Route>\n\n            </Switch>\n          \n          <InfoToolTips isOpen={isInfoToolOpen} success={successRegister} > </InfoToolTips>\n            \n\n        <section className=\"elements\">  \n        \n        </section>  \n        \n\n      </div>  \n    </div>\n\n  );\n\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}